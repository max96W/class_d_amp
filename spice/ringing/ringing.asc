Version 4
SHEET 1 3528 960
WIRE 1696 -1120 1696 -1152
WIRE 1840 -1120 1840 -1152
WIRE 1984 -1120 1984 -1152
WIRE 2160 -1120 2160 -1152
WIRE 1696 -944 1696 -1040
WIRE 1840 -944 1840 -1040
WIRE 1840 -944 1696 -944
WIRE 1984 -944 1984 -1040
WIRE 1984 -944 1840 -944
WIRE 2064 -944 1984 -944
WIRE 2160 -944 2160 -1040
WIRE 2160 -944 2064 -944
WIRE 2064 -912 2064 -944
WIRE 784 -896 704 -896
WIRE 896 -896 864 -896
WIRE 1184 -880 1136 -880
WIRE 1136 -816 1136 -880
WIRE 1952 -816 1952 -832
WIRE 2112 -816 1952 -816
WIRE 896 -752 896 -896
WIRE 1008 -752 896 -752
WIRE 1136 -752 1088 -752
WIRE 1200 -752 1136 -752
WIRE 1392 -752 1280 -752
WIRE 2112 -752 2080 -752
WIRE 816 -736 816 -752
WIRE 896 -720 896 -752
WIRE 896 -720 848 -720
WIRE 1744 -720 1712 -720
WIRE 1952 -720 1952 -736
WIRE 1952 -720 1744 -720
WIRE 2080 -720 2080 -752
WIRE 2080 -720 1952 -720
WIRE 2128 -720 2080 -720
WIRE 2176 -720 2128 -720
WIRE 592 -704 64 -704
WIRE 704 -704 704 -896
WIRE 704 -704 672 -704
WIRE 784 -704 704 -704
WIRE 896 -688 848 -688
WIRE 816 -656 816 -672
WIRE 896 -640 896 -688
WIRE 960 -640 896 -640
WIRE 1008 -640 960 -640
WIRE 1136 -640 1088 -640
WIRE 1200 -640 1136 -640
WIRE 1392 -640 1280 -640
WIRE 1904 -608 1872 -608
WIRE 2016 -608 1984 -608
WIRE 1872 -592 1872 -608
WIRE 2944 -592 2912 -592
WIRE 1920 -560 1904 -560
WIRE 1984 -560 1968 -560
WIRE 960 -544 960 -560
WIRE 1136 -544 1136 -576
WIRE 1712 -544 1712 -720
WIRE 2176 -544 2176 -720
WIRE 2912 -544 2912 -592
WIRE 2976 -544 2912 -544
WIRE 2912 -512 2912 -544
WIRE 2976 -512 2976 -544
WIRE 3024 -512 3024 -592
WIRE 1520 -464 1456 -464
WIRE 1664 -464 1600 -464
WIRE 2288 -464 2224 -464
WIRE 2432 -464 2368 -464
WIRE 64 -448 64 -704
WIRE 144 -448 64 -448
WIRE 240 -448 208 -448
WIRE 1904 -400 1904 -560
WIRE 1920 -400 1904 -400
WIRE 1984 -400 1984 -560
WIRE 672 -384 672 -464
WIRE 736 -384 672 -384
WIRE 1328 -384 1328 -464
WIRE 1344 -384 1328 -384
WIRE 1456 -384 1456 -464
WIRE 1552 -384 1504 -384
WIRE 2384 -384 2336 -384
WIRE 2432 -384 2432 -464
WIRE 2576 -384 2576 -448
WIRE 2576 -384 2544 -384
WIRE 416 -368 416 -400
WIRE 528 -368 416 -368
WIRE 736 -352 640 -352
WIRE 864 -352 848 -352
WIRE 1344 -352 1280 -352
WIRE 1504 -352 1504 -384
WIRE 1504 -352 1456 -352
WIRE 2384 -352 2384 -384
WIRE 2432 -352 2384 -352
WIRE 2624 -352 2544 -352
WIRE 2960 -352 2960 -464
WIRE 3040 -352 3040 -464
WIRE 416 -320 416 -368
WIRE 1344 -320 1280 -320
WIRE 1552 -320 1456 -320
WIRE 1680 -320 1552 -320
WIRE 1712 -320 1712 -448
WIRE 1712 -320 1680 -320
WIRE 1744 -320 1712 -320
WIRE 1856 -320 1824 -320
WIRE 1904 -320 1904 -400
WIRE 1904 -320 1856 -320
WIRE 1984 -320 1984 -400
WIRE 2032 -320 1984 -320
WIRE 2080 -320 2032 -320
WIRE 2176 -320 2176 -448
WIRE 2176 -320 2160 -320
WIRE 2208 -320 2176 -320
WIRE 2336 -320 2208 -320
WIRE 2432 -320 2336 -320
WIRE 2624 -320 2544 -320
WIRE 128 -304 128 -320
WIRE 384 -304 368 -304
WIRE -160 -288 -224 -288
WIRE -48 -288 -96 -288
WIRE 64 -288 64 -448
WIRE 64 -288 32 -288
WIRE 96 -288 64 -288
WIRE 528 -288 528 -336
WIRE 528 -288 448 -288
WIRE 1712 -288 1712 -320
WIRE 2176 -288 2176 -320
WIRE 240 -272 240 -448
WIRE 240 -272 160 -272
WIRE 384 -272 240 -272
WIRE 1904 -272 1904 -320
WIRE 1984 -272 1984 -320
WIRE 736 -256 736 -320
WIRE 864 -256 736 -256
WIRE -304 -240 -304 -288
WIRE 848 -240 848 -352
WIRE 848 -240 704 -240
WIRE 128 -224 128 -240
WIRE 672 -208 672 -384
WIRE 736 -208 672 -208
WIRE 1456 -208 1456 -288
WIRE 1520 -208 1456 -208
WIRE 1664 -208 1600 -208
WIRE 2288 -208 2224 -208
WIRE 2432 -208 2432 -288
WIRE 2432 -208 2368 -208
WIRE 96 -192 96 -256
WIRE 528 -192 528 -288
WIRE 736 -176 640 -176
WIRE 864 -176 864 -256
WIRE 864 -176 848 -176
WIRE 416 -160 416 -256
WIRE 528 -160 416 -160
WIRE 1344 -160 1344 -288
WIRE 1712 -160 1712 -192
WIRE 1904 -160 1904 -208
WIRE 1904 -160 1712 -160
WIRE 1952 -160 1904 -160
WIRE 1984 -160 1984 -208
WIRE 1984 -160 1952 -160
WIRE 2176 -160 2176 -192
WIRE 2176 -160 1984 -160
WIRE 2544 -160 2544 -288
WIRE 704 -144 704 -240
WIRE 736 -144 704 -144
WIRE 1952 -112 1952 -160
WIRE 2016 -112 1952 -112
WIRE 1952 -80 1952 -112
WIRE 2016 -48 2016 -112
WIRE -128 -32 -400 -32
WIRE 320 -32 -48 -32
WIRE 1040 -32 864 -32
WIRE 1040 -16 1040 -32
WIRE 1952 32 1952 0
WIRE -400 48 -400 -32
WIRE -272 48 -400 48
WIRE -144 48 -208 48
WIRE -128 48 -144 48
WIRE -16 48 -48 48
WIRE 112 48 -16 48
WIRE 320 48 320 -32
WIRE 320 48 192 48
WIRE 1040 80 1040 64
WIRE 2016 112 2016 32
WIRE 2016 112 1952 112
WIRE 864 128 864 -32
WIRE 880 128 864 128
WIRE 1296 128 1200 128
WIRE 1952 160 1952 112
WIRE -400 176 -400 48
WIRE -272 176 -400 176
WIRE 112 176 32 176
WIRE -144 192 -144 48
WIRE -144 192 -208 192
WIRE -96 192 -144 192
WIRE 320 192 320 48
WIRE 320 192 176 192
WIRE -272 208 -288 208
WIRE -16 208 -16 48
WIRE 112 208 -16 208
WIRE -288 240 -288 208
WIRE 32 240 32 176
WIRE 32 240 -288 240
WIRE 544 240 544 192
WIRE 544 240 432 240
WIRE 608 240 544 240
WIRE 640 240 608 240
WIRE 768 240 720 240
WIRE 848 240 768 240
WIRE 880 240 848 240
WIRE 1344 240 1200 240
WIRE 1504 240 1344 240
WIRE -240 256 -240 224
WIRE 144 256 144 224
WIRE 608 272 608 240
WIRE 1504 272 1504 240
WIRE 432 288 432 240
WIRE 544 288 544 240
WIRE 880 352 608 352
WIRE 1344 352 1344 320
WIRE 1344 352 1200 352
WIRE 432 432 432 352
WIRE 544 432 544 368
WIRE 544 432 432 432
WIRE 608 464 608 352
WIRE 1040 464 1040 400
WIRE 1344 464 1344 432
WIRE 1504 464 1504 336
WIRE 768 480 720 480
WIRE 544 496 544 432
WIRE 608 496 544 496
WIRE 544 608 544 560
FLAG 1984 -1152 +5V
IOPIN 1984 -1152 BiDir
FLAG 2160 -1152 2.5V_ref
IOPIN 2160 -1152 BiDir
FLAG 2064 -912 0
FLAG -304 -240 0
FLAG 128 -320 +5V
IOPIN 128 -320 BiDir
FLAG 416 -400 +5V
IOPIN 416 -400 BiDir
FLAG 128 -224 0
FLAG 416 -160 0
FLAG 976 -352 LOG_L
IOPIN 976 -352 BiDir
FLAG 976 -176 LOG_H
IOPIN 976 -176 BiDir
FLAG 96 -192 2.5V_ref
IOPIN 96 -192 BiDir
FLAG 816 -752 +5V
IOPIN 816 -752 BiDir
FLAG 816 -656 0
FLAG 960 -544 2.5V_ref
IOPIN 960 -544 BiDir
FLAG 1392 -752 vo+
FLAG 2208 -320 vo+
FLAG 1680 -320 vo-
FLAG 1392 -640 vo-
FLAG 1280 -352 LOG_H
IOPIN 1280 -352 BiDir
FLAG 2624 -320 LOG_H
IOPIN 2624 -320 BiDir
FLAG 2624 -352 LOG_L
IOPIN 2624 -352 BiDir
FLAG 1280 -320 LOG_L
IOPIN 1280 -320 BiDir
FLAG 1840 -1152 +12V
IOPIN 1840 -1152 BiDir
FLAG 1696 -1152 +50V
IOPIN 1696 -1152 BiDir
FLAG 2576 -448 +12V
IOPIN 2576 -448 BiDir
FLAG 1328 -464 +12V
IOPIN 1328 -464 BiDir
FLAG 672 -464 N_FAULT
IOPIN 672 -464 BiDir
FLAG -96 192 triang
FLAG 368 -304 triang
FLAG -288 208 2.5V_ref
IOPIN -288 208 BiDir
FLAG 144 256 0
FLAG -240 256 0
FLAG -240 160 +5V
IOPIN -240 160 BiDir
FLAG 144 160 +5V
IOPIN 144 160 BiDir
FLAG 1952 160 0
FLAG 1344 -160 0
FLAG 2544 -160 0
FLAG 1952 -832 +50V
IOPIN 1952 -832 BiDir
FLAG 1872 -592 0
FLAG 2016 -608 vo
FLAG 1136 -544 2.5V_ref
IOPIN 1136 -544 BiDir
FLAG 1184 -880 2.5V_ref
IOPIN 1184 -880 BiDir
FLAG 2112 -816 SENSE_H
FLAG 2112 -752 SENSE_L
FLAG 1040 -32 SENSE_H
FLAG 1296 128 SENSE_L
FLAG 1344 464 0
FLAG 1040 464 0
FLAG 544 192 +5V
IOPIN 544 192 BiDir
FLAG 1504 464 0
FLAG 1744 -656 0
FLAG 2128 -656 0
FLAG 848 240 LE
FLAG 544 608 0
FLAG 768 480 N_FAULT
IOPIN 768 480 BiDir
FLAG 768 304 0
FLAG 2912 -512 0
FLAG 2960 -352 o+
FLAG 2032 -320 o+
FLAG 3040 -352 o-
FLAG 1856 -320 o-
SYMBOL cap 1536 -384 R0
SYMATTR InstName C1
SYMATTR Value 4.7µ
SYMBOL res 1616 -480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10m
SYMBOL res 1616 -224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10m
SYMBOL cap 2352 -384 M0
SYMATTR InstName C2
SYMATTR Value 4.7µ
SYMBOL res 2272 -480 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10m
SYMBOL res 2272 -224 M90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 10m
SYMBOL Comparators\\LT1720 416 -352 R0
SYMATTR InstName U3
SYMBOL voltage 1984 -1136 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value 5
SYMBOL voltage 2160 -1136 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value 2.5
SYMBOL voltage -208 -288 R90
WINDOW 123 0 0 Left 2
WINDOW 39 24 44 Left 2
WINDOW 3 -251 6 Left 2
SYMATTR SpiceLine Rser=2.2k
SYMATTR Value SINE(0 1 1k 0 0 0)
SYMATTR InstName V4
SYMBOL cap 208 -464 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C7
SYMATTR Value {CF}
SYMBOL res 48 -304 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 43k
SYMBOL cap 1120 -816 R0
SYMATTR InstName C8
SYMATTR Value {CF1}
SYMBOL cap 1120 -640 R0
SYMATTR InstName C9
SYMATTR Value {CF1}
SYMBOL res 688 -720 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value {RF}
SYMBOL res 1296 -656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value {RF1}
SYMBOL res 1104 -656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value {RF2}
SYMBOL res 880 -912 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value {RF3}
SYMBOL res 976 -544 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R11
SYMATTR Value {RF3}
SYMBOL res 1104 -768 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value {RF2}
SYMBOL res 1296 -768 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value {RF1}
SYMBOL ind 1840 -336 R90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L3
SYMATTR Value 15µ
SYMBOL ind 2064 -336 M90
WINDOW 0 5 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName L4
SYMATTR Value 15µ
SYMBOL res 2000 -336 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 4
SYMBOL cap 1888 -272 R0
SYMATTR InstName C10
SYMATTR Value 270n
SYMBOL cap 1984 -416 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C11
SYMATTR Value 1µ
SYMATTR SpiceLine V=50 Irms=0 Rser=0.008 Lser=0
SYMBOL cap 1968 -272 R0
SYMATTR InstName C12
SYMATTR Value 270n
SYMBOL voltage 1840 -1136 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V5
SYMATTR Value 12
SYMBOL voltage 1696 -1136 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V6
SYMATTR Value 50
SYMBOL nmos 2224 -544 M0
WINDOW 0 2 -8 Left 2
WINDOW 3 -110 61 Left 2
SYMATTR InstName M1
SYMATTR Value IRFB4020
SYMATTR Prefix X
SYMBOL nmos 2224 -288 M0
WINDOW 0 2 -8 Left 2
WINDOW 3 -110 61 Left 2
SYMATTR InstName M2
SYMATTR Value IRFB4020
SYMATTR Prefix X
SYMBOL nmos 1664 -544 R0
WINDOW 0 2 -8 Left 2
WINDOW 3 -110 61 Left 2
SYMATTR InstName M3
SYMATTR Value IRFB4020
SYMATTR Prefix X
SYMBOL nmos 1664 -288 R0
WINDOW 0 2 -8 Left 2
WINDOW 3 -110 61 Left 2
SYMATTR InstName M4
SYMATTR Value IRFB4020
SYMATTR Prefix X
SYMBOL AutoGenerated\\UCC27211 1392 -336 R0
SYMATTR InstName U6
SYMBOL AutoGenerated\\UCC27211 2496 -336 M0
SYMATTR InstName U7
SYMBOL 74HCT\\74hct10 784 -432 R0
SYMATTR InstName U13
SYMBOL 74HCT\\74hct10 784 -256 R0
SYMATTR InstName U4
SYMBOL 74HCT\\74hct04 912 -416 R0
SYMATTR InstName U10
SYMBOL 74HCT\\74hct04 912 -240 R0
SYMATTR InstName U11
SYMBOL res 208 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 22k
SYMBOL res -32 32 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 15k
SYMBOL cap -208 32 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C4
SYMATTR Value 33p
SYMBOL Comparators\\LT1720 144 128 R0
SYMATTR InstName U1
SYMBOL Opamps\\opamp2 -240 128 R0
SYMATTR InstName U2
SYMATTR Value OPA350
SYMBOL res -32 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R18
SYMATTR Value 22k
SYMBOL 74HCT\\74hct86 576 -416 R0
SYMATTR InstName U5
SYMBOL 74HCT\\74hct86 576 -240 R0
SYMATTR InstName U12
SYMBOL ind 1968 16 R180
WINDOW 0 36 80 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName L2
SYMATTR Value 30n
SYMBOL res 1968 128 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R19
SYMATTR Value 10m
SYMBOL res 2000 -64 R0
SYMATTR InstName R22
SYMATTR Value 8k
SYMBOL e 2000 -608 M270
SYMATTR InstName E1
SYMATTR Value 1
SYMBOL Opamps\\opamp2 128 -336 R0
SYMATTR InstName U8
SYMATTR Value OPA350
SYMBOL Opamps\\opamp2 816 -768 M0
SYMATTR InstName U9
SYMATTR Value OPA350
SYMBOL res 1936 -832 R0
SYMATTR InstName R17
SYMATTR Value 20m
SYMATTR SpiceLine pwr=5
SYMBOL Opamps\\LT6118 1040 288 R0
SYMATTR InstName U14
SYMBOL res 1024 -32 R0
SYMATTR InstName R20
SYMATTR Value 560
SYMBOL res 1328 224 R0
SYMATTR InstName R21
SYMATTR Value 10k
SYMBOL res 1328 336 R0
SYMATTR InstName R23
SYMATTR Value 820
SYMBOL res 592 256 R0
SYMATTR InstName R24
SYMATTR Value 10k
SYMBOL res 736 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R25
SYMATTR Value 10k
SYMBOL cap 1488 272 R0
SYMATTR InstName C13
SYMATTR Value 150p
SYMBOL cap 1728 -720 R0
SYMATTR InstName C6
SYMATTR Value 100n
SYMBOL cap 2112 -720 R0
SYMATTR InstName C14
SYMATTR Value 100n
SYMBOL cap -160 -272 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C15
SYMATTR Value 2.2µ
SYMBOL 74HCT\\74hct08 656 416 R0
SYMATTR InstName U15
SYMBOL cap 528 496 R0
SYMATTR InstName C3
SYMATTR Value 2.2µ
SYMBOL res 560 384 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R26
SYMATTR Value 1.5Meg
SYMBOL diode 448 352 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL cap 752 240 R0
SYMATTR InstName C5
SYMATTR Value 10n
SYMBOL sw 2944 -464 M90
SYMATTR InstName S1
SYMATTR Value MYSW
SYMBOL voltage 3040 -592 M270
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value PULSE(0 5 250u 10n 10n)
TEXT -392 -544 Left 2 !.include ../../libs/IRFB4020.LIB
TEXT -392 -512 Left 2 !.include ../../libs/OPA350.LIB
TEXT -392 -576 Left 2 !.include ../../libs/UCC27211.LIB
TEXT -400 -824 Left 2 !.tran 0 1m 0 10u uic
TEXT -392 -640 Left 2 !.lib cd4000.lib
TEXT -400 -872 Left 2 !.param RF1=2Meg RF2=56k CF1=6.8p RF3=56k CF=150p RF=47k
TEXT -392 -608 Left 2 !.lib 74hct.lib
TEXT -392 -472 Left 2 !.four 1k 10 v(vo)
TEXT 928 -264 Left 2 ;inverters are sn74lvc2g04
TEXT -384 -688 Left 2 !;savebias bias.txt internal time=998u
TEXT -368 -424 Left 2 !.loadbias bias.txt
TEXT 2864 -48 Left 2 !.model MYSW SW(Ron=1Meg Roff=10Meg Vt=.5 Vh=-.4)
